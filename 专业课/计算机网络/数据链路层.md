# 数据链路层概述

## 数据链路层在网络体系结构中的地位

![](photo/Pasted%20image%2020241105214755.png)

- **链路**就是从一个结点到相邻结点的一段物理线路，而中间没有任何其他交换结点。
- **数据链路**是指把实现通信协议的硬件和软件加到链路上，就构成了数据链路。
- 数据链路层以**帧**为单位传输和处理数据。

## 数据链路层的三个重要问题

### 封装成帧

在数据从发送方的应用层到网络层，各层都会为数据添加**协议首部**。

#### 什么是封装成帧

- 我们将数据链路层给网络层交付的协议数据单元，添加**帧头**和**帧尾**的操作，称为**封装成帧**
	- 帧头和帧尾包含重要的控制信息
	- 帧头和帧尾的作用之一就是**帧定界**

#### `MAC`地址如何界定以太网帧呢？

> 以太网封装`MAC`帧后，将其交付给物理层，物理层会在`MAC`帧后添加8字节的**前导码**，然后再将比特流转化为电信号发送。

> **前导码**的前7个字节为**前同步码**，作用是使接收方的时钟同步，之后的一字节为**帧开始定界符**，表明其紧跟后面的就是`MAC`帧。

![](photo/Pasted%20image%2020241112214729.png)

> 说明:以太网规定帧间间隔时间为96比特的发送时间。

> **因此，`MAC`地址是不需要帧结束定界符。**

#### 透明传输




> 添加帧头帧尾的目的，是为了在链路上以帧为单元来传送数据，也就是为了实现数据链路层本身的功能。

![](photo/Pasted%20image%2020241105215813.png)


### 差错检测

帧在传输过程中，可能会出现误码。接收方通过**差错检测**来判断是否出现这种情况。

- 发送方
	在发送之前，会基于待发送的数据和检错算法计算出检错码，并将其封装到**帧尾**。
- 接收方
	在收到帧后，通过**检错码**和**检错算法**，可以判断出帧在传输过程中，是否出现了**误码**。

### 可靠传输

接收方在收到误码的帧后，是不会接收该帧的，将其丢弃。

> 若数据链路层向上层提供的是不可靠服务，丢弃就是丢弃了，无需任何操作；
> 若提供的是可靠服务，那么就需要其他措施来确保，接收方主机还可以重新收到被丢弃帧的正确副本。 

## 使用广播信道的数据链路层(共享式局域网)

![](photo/Pasted%20image%2020241112210856.png)

### 发送地址问题

> 当A向C发送帧时，B、D、E如何知道该帧不是发送给他们的，而C是如何知道该帧是发送给他的。

#### 编址

> 将帧的目的地址添加在帧中一起传输。如`MAC`地址中前两个字段分别是帧的**目的地址**和**源地址**。

![](photo/Pasted%20image%2020241112211214.png)

### 信号碰撞

> 当多台主机使用总线进行信息传输时，传输信号会产生碰撞。这是共享式局域网所不可避免的问题。

## 交换式局域网

> 如今用点对点交换机实现的有线局域网领域已经完全取代了共享式局域网。

## 无线局域网

> 无线局域网仍然使用的是共享信道技术。